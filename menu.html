<!doctype html>
<html lang="en">
<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

	<style>
		.menuList
		{
			display: flex	;
			flex-wrap: wrap;
			justify-content: space-around;
			height: 75vh;
			overflow-y: auto;
			
		}

		.menuCard{
			border-radius: 15px;
			border: solid #bbb 1px;
			min-height: 250px;
			display: flex;
			flex-direction: column;
			justify-content: space-around;
			align-items: center;
			padding: 10px;
			margin: 0;
			box-shadow: 9px 10px 5px -5px #CACACA;
		}

		a, a:hover, a:active, a:visited{
			text-decoration: none;
			color: black;
		}

	</style>
	<title>早安公雞</title>
</head>
<body>
	<nav class="navbar navbar-expand-lg navbar-light bg-light">
		<a class="navbar-brand" href="#">早安公雞 農場晨食</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
	</nav>

	<div class="d-flex justify-content-center" style="margin: 20px 50px;">
		<div class="d-flex flex-column justify-content-center" id="info">
		</div>
		<div class="col-8">
			<div id="carouselIndicators" class="carousel slide" data-ride="carousel">
				<ol class="carousel-indicators">
					<li data-target="#carouselIndicators" data-slide-to="0" class="active"></li>
					<li data-target="#carouselIndicators" data-slide-to="1"></li>
					<li data-target="#carouselIndicators" data-slide-to="2"></li>
				</ol>
				<div class="carousel-inner">
					<div class="carousel-item active">
					<img class="d-block w-100" src="./image/banner.png" alt="First slide">
					</div>
					<div class="carousel-item">
					<img class="d-block w-100" src="./image/banner.png" alt="Second slide">
					</div>
					<div class="carousel-item">
					<img class="d-block w-100" src="./image/banner.png" alt="Third slide">
					</div>
					</div>
					<a class="carousel-control-prev" href="#carouselIndicators" role="button" data-slide="prev">
						<span class="carousel-control-prev-icon" aria-hidden="true"></span>
						<span class="sr-only">Previous</span>
					</a>
					<a class="carousel-control-next" href="#carouselIndicators" role="button" data-slide="next">
						<span class="carousel-control-next-icon" aria-hidden="true"></span>
						<span class="sr-only">Next</span>
					</a>
				</div>
			</div>

		</div>
	</div>

	<hr>

	<div class="d-flex">
		<div class="col-2" style="height: 75vh; overflow-y: auto;">
			<hr>
			<a href="#" onclick="getMenu('A')">
				<div class="d-flex flex-column align-items-center">
					<img src="./image/restaurant.png" alt="restaurant" style="width: 60%;">
					<p>公雞老麵堡</p>
				</div>
			</a>
			<hr>
			<a href="#" onclick="getMenu('B')">
				<div class="d-flex flex-column align-items-center">
					<img src="./image/restaurant.png" alt="restaurant" style="width: 60%;">
					<p>母雞蛋煎餅</p>
				</div>
			</a>
			<hr>
			<a href="#" onclick="getMenu('C')">
				<div class="d-flex flex-column align-items-center">
					<img src="./image/restaurant.png" alt="restaurant" style="width: 60%;">
					<p>小雞愛吐司<br>(抹醬系列)</p>
				</div>
			</a>
			<hr>
			<a href="#" onclick="getMenu('D')">
				<div class="d-flex flex-column align-items-center">
					<img src="./image/restaurant.png" alt="restaurant" style="width: 60%;">
					<p>小雞愛吐司</p>
				</div>
			</a>
			<hr>
			<a href="#" onclick="getMenu('E')">
				<div class="d-flex flex-column align-items-center">
					<img src="./image/restaurant.png" alt="restaurant" style="width: 60%;">
					<p>烏冬熱熱炒</p>
				</div>
			</a>
			<hr>
			<a href="#" onclick="getMenu('F')">
				<div class="d-flex flex-column align-items-center">
					<img src="./image/restaurant.png" alt="restaurant" style="width: 60%;">
					<p>農場小點心</p>
				</div>
			</a>
			<hr>
			<a href="#" onclick="getMenu('G')">
				<div class="d-flex flex-column align-items-center">
					<img src="./image/restaurant.png" alt="restaurant" style="width: 60%;">
					<p>一日早晨飲</p>
				</div>
			</a>
			<hr>
		</div>
		<div class="col-8 menuList">

		</div>
		<div class="col-2" style="height:75vh; background-color: cyan;">

		</div>
	</div>

	<script src="https://code.jquery.com/jquery-3.7.0.js" integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/js/all.min.js" integrity="sha512-uKQ39gEGiyUJl4AI6L+ekBdGKpGw4xJ55+xyJG7YFlJokPNYegn9KwQ3P8A7aFQAUtUsAQHep+d/lrGqrbPIDQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</body>
</html>


<script>

	//get url parameter
	function getUrlParameter(sParam) {
		var sPageURL = window.location.search.substring(1),
			sURLVariables = sPageURL.split('&'),
			sParameterName,
			i;

		for(i = 0; i < sURLVariables.length; i++) {
			sParameterName = sURLVariables[i].split('=');

			if(sParameterName[0] === sParam) {
				return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
			}
		}
	};

	$.ajax({
			url: 'backend/restaurant.php?id=' + getUrlParameter('id'),
			method: 'GET',
			dataType: 'json',
			success: function(response) {
				if (response[0])
				{
					let _this = response[0];
					$('#info').empty();
					$('#info').append('<h3>' + _this.name + '</h3>');
					$('#info').append('<h6>' + _this.address + '</h6>');
					$('#info').append('<h6>' + _this.telephone + '</h6>');
					$('#info').append('<div><i class="fa-solid fa-star"></i>&nbsp;' + _this.star + '</div>');
				}

			},
			error: function(xhr, status, error) {
				console.log('Request failed: ' + status);
			}
		});

		
		function getMenu(cat)
		{
			$.ajax({
				url: 'backend/menu.php?category=' + cat,
				method: 'GET',
				dataType: 'json',
				success: function(response) {
					console.log(response);
					$('.menuList').empty();	

					for (const i in response) {
						let _this = response[i];
						$('.menuList').append(`
								<div class="col-12 col-md-4 col-lg-3 mb-3">
									<div class="menuCard">
										<img src="./image/${_this.image}" width="100%" height="100%" alt="meals-pic">
										<h4>${_this.name}</h4>
										<div class="d-flex justify-content-between align-items-center">
											<div class="col-9" style="padding: 0;">NT$ ${_this.price}</div>
											<div class="col-3" style="padding: 0;"><button class="btn btn-outline-primary"> + </button></div>
										</div>
									</div>
								</div>`);
					}
				},
				error: function(xhr, status, error) {
					console.log('Request failed: ' + status);
				}
			});
	}

	$(document).ready(function() {
		getMenu('A')
	});

</script>

